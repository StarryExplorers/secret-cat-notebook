<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Secret Cat World</title>
<style>
  body {
    font-family: 'Comic Sans MS', cursive, sans-serif;
    background: #fef6f0;
    margin: 0; padding: 20px;
    text-align: center;
  }
  #unlock-section, #house, #cat-room {
    max-width: 400px;
    margin: 20px auto;
    background: #fff7e6;
    border-radius: 12px;
    padding: 15px;
    box-shadow: 0 0 15px #e0c097;
  }
  input[type=text] {
    font-size: 18px;
    padding: 8px;
    width: 70%;
    border-radius: 8px;
    border: 2px solid #cfa878;
  }
  button {
    font-size: 16px;
    margin: 6px 4px;
    padding: 8px 12px;
    border-radius: 8px;
    border: none;
    background: #d9b382;
    color: #3f2e1e;
    cursor: pointer;
    transition: background 0.3s;
  }
  button:hover {
    background: #cfa878;
  }
  #cat-image {
    width: 200px;
    height: 200px;
    margin: 15px 0;
    border-radius: 12px;
    object-fit: contain;
  }
  .hidden { display: none; }
  #message {
    margin: 10px 0 20px 0;
    font-weight: bold;
    min-height: 30px;
  }
  .cat-card {
    display: inline-block;
    margin: 10px;
    cursor: pointer;
    border-radius: 12px;
    box-shadow: 0 0 10px #e0c097;
    padding: 8px;
    background: #fff1cc;
  }
  .cat-card img {
    width: 100px;
    height: 100px;
    border-radius: 12px;
    object-fit: contain;
  }
  .cat-name {
    font-weight: bold;
    margin-top: 6px;
  }
  #room-buttons button {
    min-width: 90px;
  }
</style>
</head>
<body>

<h1>Welcome to Secret Cat World</h1>

<!-- Unlock new cat -->
<section id="unlock-section">
  <p>Enter a secret cat word to unlock a new kitty!</p>
  <input type="text" id="secret-word" placeholder="Type a secret word" />
  <button id="unlock-btn">Unlock</button>
  <p id="unlock-msg"></p>
</section>

<!-- Cat House - show all cats -->
<section id="house" class="hidden">
  <h2>Your Cat House</h2>
  <div id="cats-list"></div>
  <button id="back-to-unlock" style="margin-top: 15px;">Unlock More Cats</button>
</section>

<!-- Cat Room -->
<section id="cat-room" class="hidden">
  <h2 id="cat-room-title"></h2>
  <img id="cat-image" src="" alt="Your Cat" />
  <div id="room-buttons">
    <button data-action="feed">Feed</button>
    <button data-action="bath">Give Bath</button>
    <button data-action="sleep">Sleep</button>
    <button data-action="dress">Dress</button>
    <button data-action="play">Play</button>
    <button data-action="makeup">Makeup</button>
  </div>
  <p id="message"></p>
  <button id="back-to-house" style="margin-top: 10px;">Back to Cat House</button>
</section>

<script>
// Cat data with secret words and images
const catsData = {
  whiskers: {
    name: "Whiskers",
    img: "https://i.imgur.com/UJ5rwtG.png",
    dressImg: "https://i.imgur.com/zR1F72U.png",
    makeupImg: "https://i.imgur.com/9b9EohT.png",
    state: { fed: false, bathed: false, slept: false, dressed: false, played: false, makeup: false }
  },
  mittens: {
    name: "Mittens",
    img: "https://i.imgur.com/Wv5s6Ah.png",
    dressImg: "https://i.imgur.com/87H9Wur.png",
    makeupImg: "https://i.imgur.com/OkXg9kH.png",
    state: { fed: false, bathed: false, slept: false, dressed: false, played: false, makeup: false }
  },
  shadow: {
    name: "Shadow",
    img: "https://i.imgur.com/qZcRqCk.png",
    dressImg: "https://i.imgur.com/7qvlNsS.png",
    makeupImg: "https://i.imgur.com/I0NwwzL.png",
    state: { fed: false, bathed: false, slept: false, dressed: false, played: false, makeup: false }
  }
};

const unlockSection = document.getElementById('unlock-section');
const houseSection = document.getElementById('house');
const catRoomSection = document.getElementById('cat-room');

const secretWordInput = document.getElementById('secret-word');
const unlockBtn = document.getElementById('unlock-btn');
const unlockMsg = document.getElementById('unlock-msg');

const catsList = document.getElementById('cats-list');
const backToUnlockBtn = document.getElementById('back-to-unlock');

const catRoomTitle = document.getElementById('cat-room-title');
const catImage = document.getElementById('cat-image');
const roomButtons = document.querySelectorAll('#room-buttons button');
const message = document.getElementById('message');
const backToHouseBtn = document.getElementById('back-to-house');

let unlockedCats = JSON.parse(localStorage.getItem('unlockedCats')) || {};
let currentCatKey = null;

// Save state to localStorage
function saveState() {
  localStorage.setItem('unlockedCats', JSON.stringify(unlockedCats));
}

// Load cat state or reset if missing
function loadCatState(key) {
  if (!unlockedCats[key]) {
    unlockedCats[key] = JSON.parse(JSON.stringify(catsData[key].state));
  }
  return unlockedCats[key];
}

// Update cat image based on dress/makeup state
function updateCatImage(key) {
  const state = unlockedCats[key];
  if(state.dressed && state.makeup){
    catImage.src = catsData[key].makeupImg; // makeup + dress image
  } else if(state.dressed){
    catImage.src = catsData[key].dressImg; // dress image
  } else {
    catImage.src = catsData[key].img; // normal image
  }
}

// Show cat house with all unlocked cats
function showCatHouse() {
  unlockSection.classList.add('hidden');
  catRoomSection.classList.add('hidden');
  houseSection.classList.remove('hidden');
  catsList.innerHTML = '';

  for (const key in unlockedCats) {
    const cat = catsData[key];
    const card = document.createElement('div');
    card.className = 'cat-card';
    card.innerHTML = `
      <img src="${cat.img}" alt="${cat.name}" />
      <div class="cat-name">${cat.name}</div>
    `;
    card.onclick = () => openCatRoom(key);
    catsList.appendChild(card);
  }
}

// Open cat room for interactions
function openCatRoom(key) {
  currentCatKey = key;
  unlockSection.classList.add('hidden');
  houseSection.classList.add('hidden');
  catRoomSection.classList.remove('hidden');

  const cat = catsData[key];
  catRoomTitle.textContent = `Cat Room: ${cat.name}`;
  loadCatState(key);
  updateCatImage(key);
  message.textContent = 'What do you want to do?';
}

// Unlock a new cat by secret word
unlockBtn.onclick = () => {
  const word = secretWordInput.value.trim().toLowerCase();
  if (word in catsData) {
    if (unlockedCats[word]) {
      unlockMsg.textContent = `${catsData[word].name} is already unlocked!`;
    } else {
      unlockedCats[word] = JSON.parse(JSON.stringify(catsData[word].state));
      saveState();
      unlockMsg.textContent = `Congrats! You unlocked ${catsData[word].name}!`;
      setTimeout(showCatHouse, 1000);
    }
  } else {
    unlockMsg.textContent = "No cat matches that secret word. Try again!";
  }
  secretWordInput.value = '';
};

// Room button actions
roomButtons.forEach(button => {
  button.onclick = () => {
    if (!currentCatKey) return;
    const action = button.dataset.action;
    const state = unlockedCats[currentCatKey];

    switch(action) {
      case 'feed':
        if (!state.fed) {
          state.fed = true;
          message.textContent = "You fed your kitty some yummy milk and fish!";
        } else {
          message.textContent = "Your kitty is already full!";
        }
        break;
      case 'bath':
        if (!state.bathed) {
          state.bathed = true;
          message.textContent = "Splish splash! Kitty had a bubbly bath!";
        } else {
          message.textContent = "Your kitty is already clean!";
        }
        break;
      case 'sleep':
        if (!state.slept) {
          state.slept = true;
          message.textContent = "Shhh... Kitty is sleeping peacefully.";
        } else {
          message.textContent = "Your kitty is well rested!";
        }
        break;
      case 'dress':
        if (!state.dressed) {
          state.dressed = true;
          message.textContent = "The kitty is now wearing a cute outfit!";
        } else {
          message.textContent = "Your kitty is already dressed!";
        }
        break;
      case 'play':
        if (!state.played) {
          state.played = true;
          message.textContent = "Toys everywhere! Kitty is chasing a yarn ball!";
        } else {
          message.textContent = "Your kitty had enough playtime!";
        }
        break;
      case 'makeup':
        if (!state.makeup) {
          state.makeup = true;
          message.textContent = "A little blush and sparkle... Fancy cat time!";
        } else {
          message.textContent = "Your kitty looks fabulous already!";
        }
        break;
    }
    updateCatImage(currentCatKey);
    saveState();
  };
});

// Back buttons
backToHouseBtn.onclick = () => {
  showCatHouse();
};

backToUnlockBtn.onclick = () => {
  houseSection.classList.add('hidden');
  unlockSection.classList.remove('hidden');
  unlockMsg.textContent = '';
  secretWordInput.value = '';
};

// On page load - show unlock or house depending on saved cats
window.onload = () => {
  if(Object.keys(unlockedCats).length > 0){
    showCatHouse();
  } else {
    unlockSection.classList.remove('hidden');
  }
};
</script>

</body>
  </html>
